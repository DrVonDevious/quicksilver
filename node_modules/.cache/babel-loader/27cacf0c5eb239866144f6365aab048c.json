{"ast":null,"code":"import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import{v4 as uuid}from'uuid';import{Rnd}from'react-rnd';import{setMode,setComponents,resetComponents}from'../reducers/loadReducer';import ComponentItem from'../components/ComponentItem';import SearchBar from'../components/SearchBar';import'../css/ComponentListContainer.css';var ComponentListContainer=function ComponentListContainer(){var state=useSelector(function(state){return state;});var dispatch=useDispatch();var fetchComponents=function fetchComponents(isLibrary){var token=localStorage.getItem(\"token\");var url=\"\";isLibrary?url=\"library_components\":url=\"user_components\";fetch(\"http://localhost:8080/\"+url,{headers:{\"Authorization\":\"Bearer: \".concat(token)}}).then(function(res){return res.json();}).then(function(data){var components=data;dispatch(resetComponents());if(!isLibrary){components=data.filter(function(c){return c.user_id===state.user.currentUser.id;});};dispatch(setComponents(components));});};useEffect(function(){if(state.user.currentUser){fetchComponents(false);dispatch(setMode(\"user\"));}else{fetchComponents(true);dispatch(setMode(\"lib\"));};},[]);useEffect(function(){var libTab=document.querySelector(\"#libTab\");var userTab=document.querySelector(\"#userTab\");if(state.user.currentUser){if(state.load.mode===\"lib\"){userTab.style.backgroundColor=\"#162228\";libTab.style.backgroundColor=\"#263238\";}else{libTab.style.backgroundColor=\"#162228\";userTab.style.backgroundColor=\"#263238\";};};});var handleSwitchList=function handleSwitchList(type){switch(type){case\"lib\":fetchComponents(true);dispatch(setMode(\"lib\"));break;case\"user\":fetchComponents(false);dispatch(setMode(\"user\"));break;};};return/*#__PURE__*/React.createElement(Rnd,{className:\"component-container\",bounds:\".main-container\",default:{x:window.innerWidth/1.02-320,y:window.innerHeight/2.88-250,width:320,height:500},enableResizing:{bottom:true,bottomLeft:false,bottomRight:false,left:false,right:false,top:false,topLeft:false,topRight:false}},/*#__PURE__*/React.createElement(\"p\",{className:\"component-label\"},\"Components\"),state.user.currentUser?[/*#__PURE__*/React.createElement(\"button\",{id:\"userTab\",className:\"component-tab\",onClick:function onClick(){return handleSwitchList(\"user\");}},\"My Components\")]:null,/*#__PURE__*/React.createElement(\"button\",{id:\"libTab\",className:\"component-tab\",onClick:function onClick(){return handleSwitchList(\"lib\");}},\"Library\"),/*#__PURE__*/React.createElement(\"div\",{className:\"component-list\"},/*#__PURE__*/React.createElement(SearchBar,null),state.load.components.filter(function(c){return c.name.includes(state.load.query);}).map(function(c){return/*#__PURE__*/React.createElement(ComponentItem,{component:c,key:uuid()});})));};export default ComponentListContainer;","map":{"version":3,"sources":["/Users/william/Dev/quicksilver/client/src/containers/ComponentListContainer.js"],"names":["React","useEffect","useSelector","useDispatch","v4","uuid","Rnd","setMode","setComponents","resetComponents","ComponentItem","SearchBar","ComponentListContainer","state","dispatch","fetchComponents","isLibrary","token","localStorage","getItem","url","fetch","headers","then","res","json","data","components","filter","c","user_id","user","currentUser","id","libTab","document","querySelector","userTab","load","mode","style","backgroundColor","handleSwitchList","type","x","window","innerWidth","y","innerHeight","width","height","bottom","bottomLeft","bottomRight","left","right","top","topLeft","topRight","name","includes","query","map"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { v4 as uuid } from 'uuid';\nimport { Rnd } from 'react-rnd';\n\nimport { setMode, setComponents, resetComponents } from '../reducers/loadReducer';\nimport ComponentItem from '../components/ComponentItem';\nimport SearchBar from '../components/SearchBar';\nimport '../css/ComponentListContainer.css';\n\nconst ComponentListContainer = () => {\n\n  const state = useSelector(state => state);\n  const dispatch = useDispatch();\n\n  const fetchComponents = (isLibrary) => {\n    const token = localStorage.getItem(\"token\");\n    var url = \"\"\n    isLibrary ? (url = \"library_components\") : (url = \"user_components\");\n    fetch(\"http://localhost:8080/\" + url, {\n      headers: {\n        \"Authorization\": `Bearer: ${token}`\n      }\n    })\n      .then(res => res.json())\n      .then(data => {\n        var components = data;\n        dispatch(resetComponents())\n        if (!isLibrary) {\n          components = data.filter(c => c.user_id === state.user.currentUser.id)\n        };\n        dispatch(setComponents(components))\n      })\n  };\n\n  useEffect(() => {\n    if (state.user.currentUser) {\n      fetchComponents(false);\n      dispatch(setMode(\"user\"));\n    } else {\n      fetchComponents(true);\n      dispatch(setMode(\"lib\"));\n    };\n  }, []);\n\n  useEffect(() => {\n    const libTab = document.querySelector(\"#libTab\");\n    const userTab = document.querySelector(\"#userTab\");\n    if(state.user.currentUser) {\n      if(state.load.mode === \"lib\") {\n        userTab.style.backgroundColor = \"#162228\";\n        libTab.style.backgroundColor = \"#263238\";\n      } else {\n        libTab.style.backgroundColor = \"#162228\";\n        userTab.style.backgroundColor = \"#263238\";\n      };\n    };\n  });\n\n  const handleSwitchList = (type) => {\n    switch(type) {\n      case \"lib\":\n        fetchComponents(true);\n        dispatch(setMode(\"lib\"));\n        break;\n      case \"user\":\n        fetchComponents(false);\n        dispatch(setMode(\"user\"));\n        break;\n    };\n  };\n\n  return (\n    <Rnd\n      className=\"component-container\"\n      bounds=\".main-container\"\n      default={{\n        x: window.innerWidth / 1.02 -320,\n        y: window.innerHeight / 2.88 -250,\n        width: 320,\n        height: 500,\n      }}\n      enableResizing={{\n        bottom: true,\n        bottomLeft: false,\n        bottomRight: false,\n        left: false,\n        right: false,\n        top: false,\n        topLeft: false,\n        topRight: false,\n      }}\n    >\n      <p className=\"component-label\">Components</p>\n      { state.user.currentUser ? [\n        <button id=\"userTab\" className=\"component-tab\" onClick={() => handleSwitchList(\"user\")}>My Components</button>,\n      ] : null }\n      <button id=\"libTab\" className=\"component-tab\" onClick={() => handleSwitchList(\"lib\")}>Library</button>\n      <div className=\"component-list\">\n      <SearchBar />\n        {\n          state.load.components\n            .filter(c => c.name.includes(state.load.query))\n            .map(c => (<ComponentItem component={c} key={uuid()} />))\n        }\n      </div>\n    </Rnd>\n  );\n};\n\nexport default ComponentListContainer;\n"]},"metadata":{},"sourceType":"module"}