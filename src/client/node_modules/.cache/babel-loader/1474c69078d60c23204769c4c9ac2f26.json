{"ast":null,"code":"var _ = require('lodash'),\n    domEach = require('../utils').domEach;\n\nvar toString = Object.prototype.toString;\n/**\n * Set / Get css.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @return {self}\n * @api public\n */\n\nexports.css = function (prop, val) {\n  if (arguments.length === 2 || // When `prop` is a \"plain\" object\n  toString.call(prop) === '[object Object]') {\n    return domEach(this, function (idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  } else {\n    return getCss(this[0], prop);\n  }\n};\n/**\n * Set styles of all elements.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @param {Number} idx - optional index within the selection\n * @return {self}\n * @api private\n */\n\n\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function (k) {\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n/**\n * Get parsed styles of the first element.\n *\n * @param {String} prop\n * @return {Object}\n * @api private\n */\n\n\nfunction getCss(el, prop) {\n  var styles = parse(el.attribs.style);\n\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    return _.pick(styles, prop);\n  } else {\n    return styles;\n  }\n}\n/**\n * Stringify `obj` to styles.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\n\nfunction stringify(obj) {\n  return Object.keys(obj || {}).reduce(function (str, prop) {\n    return str += '' + (str ? ' ' : '') + prop + ': ' + obj[prop] + ';';\n  }, '');\n}\n/**\n * Parse `styles`.\n *\n * @param {String} styles\n * @return {Object}\n * @api private\n */\n\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n  if (!styles) return {};\n  return styles.split(';').reduce(function (obj, str) {\n    var n = str.indexOf(':'); // skip if there is no :, or if it is the first/last character\n\n    if (n < 1 || n === str.length - 1) return obj;\n    obj[str.slice(0, n).trim()] = str.slice(n + 1).trim();\n    return obj;\n  }, {});\n}","map":{"version":3,"sources":["/Users/william/Dev/quicksilver/node_modules/cheerio/lib/api/css.js"],"names":["_","require","domEach","toString","Object","prototype","exports","css","prop","val","arguments","length","call","idx","el","setCss","getCss","styles","attribs","style","stringify","keys","forEach","k","parse","Array","isArray","pick","obj","reduce","str","trim","split","n","indexOf","slice"],"mappings":"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","sourcesContent":["var _ = require('lodash'),\n    domEach = require('../utils').domEach;\nvar toString = Object.prototype.toString;\n\n/**\n * Set / Get css.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @return {self}\n * @api public\n */\n\nexports.css = function(prop, val) {\n  if (arguments.length === 2 ||\n    // When `prop` is a \"plain\" object\n    (toString.call(prop) === '[object Object]')) {\n    return domEach(this, function(idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  } else {\n    return getCss(this[0], prop);\n  }\n};\n\n/**\n * Set styles of all elements.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @param {Number} idx - optional index within the selection\n * @return {self}\n * @api private\n */\n\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function(k){\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n\n/**\n * Get parsed styles of the first element.\n *\n * @param {String} prop\n * @return {Object}\n * @api private\n */\n\nfunction getCss(el, prop) {\n  var styles = parse(el.attribs.style);\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    return _.pick(styles, prop);\n  } else {\n    return styles;\n  }\n}\n\n/**\n * Stringify `obj` to styles.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction stringify(obj) {\n  return Object.keys(obj || {})\n    .reduce(function(str, prop){\n      return str += ''\n        + (str ? ' ' : '')\n        + prop\n        + ': '\n        + obj[prop]\n        + ';';\n    }, '');\n}\n\n/**\n * Parse `styles`.\n *\n * @param {String} styles\n * @return {Object}\n * @api private\n */\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n\n  if (!styles) return {};\n\n  return styles\n    .split(';')\n    .reduce(function(obj, str){\n      var n = str.indexOf(':');\n      // skip if there is no :, or if it is the first/last character\n      if (n < 1 || n === str.length-1) return obj;\n      obj[str.slice(0,n).trim()] = str.slice(n+1).trim();\n      return obj;\n    }, {});\n}\n"]},"metadata":{},"sourceType":"script"}